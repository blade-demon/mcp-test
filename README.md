# è´§å¸å…‘æ¢ MCP æœåŠ¡å™¨

ä¸€ä¸ªåŸºäº MCP (Model Context Protocol) çš„è´§å¸å…‘æ¢æœåŠ¡å™¨ï¼Œæ”¯æŒå¤šç§ä¸»æµè´§å¸ä¹‹é—´çš„å…‘æ¢è®¡ç®—ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ’± **è´§å¸å…‘æ¢**: æ”¯æŒ 10 ç§ä¸»æµè´§å¸ä¹‹é—´çš„å…‘æ¢è®¡ç®—
- ğŸ¤– **LLM é›†æˆ**: æ”¯æŒè‡ªç„¶è¯­è¨€å¤„ç†è´§å¸å…‘æ¢è¯·æ±‚
- ğŸ“Š **CSV å¤„ç†**: æ”¯æŒæ‰¹é‡å¤„ç† CSV æ–‡ä»¶ä¸­çš„å…‘æ¢è¯·æ±‚
- ğŸŒ **Web å®¢æˆ·ç«¯**: æä¾›å®Œæ•´çš„ Web ç•Œé¢è¿›è¡Œè´§å¸å…‘æ¢

## æ”¯æŒçš„è´§å¸

| è´§å¸       | ISO ä»£ç  | å…‘æ¢ç¾å…ƒæ±‡ç‡ |
| ---------- | -------- | ------------ |
| ç¾å…ƒ       | USD      | 1.000 (åŸºå‡†) |
| æ¬§å…ƒ       | EUR      | 1.083        |
| è‹±é•‘       | GBP      | 1.272        |
| æ—¥å…ƒ       | JPY      | 156.80       |
| äººæ°‘å¸     | CNY      | 7.243        |
| åŠ æ‹¿å¤§å…ƒ   | CAD      | 1.370        |
| æ¾³å¤§åˆ©äºšå…ƒ | AUD      | 1.515        |
| ç‘å£«æ³•éƒ   | CHF      | 0.915        |
| æ¸¯å…ƒ       | HKD      | 7.810        |
| æ–°è¥¿å…°å…ƒ   | NZD      | 1.646        |

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
npm install
```

### 2. å¯åŠ¨æœåŠ¡å™¨

```bash
./start-server.sh
```

### 3. è®¿é—®å®¢æˆ·ç«¯

- **è´§å¸å…‘æ¢å®¢æˆ·ç«¯**: http://localhost:3000/examples/currency-exchange-client.html
- **ç®€å•å®¢æˆ·ç«¯æµ‹è¯•**: http://localhost:3000/test-client-simple.html

## API ç«¯ç‚¹

- **çŠ¶æ€æ£€æŸ¥**: `GET /status`
- **å·¥å…·åˆ—è¡¨**: `GET /tools`
- **SSE è¿æ¥**: `GET /sse?sessionId=<session_id>`
- **MCP æ¶ˆæ¯**: `POST /mcp/<session_id>`

## æ ¸å¿ƒå·¥å…·

### currency_exchange

è®¡ç®—ä¸åŒè´§å¸ä¹‹é—´çš„å…‘æ¢é‡‘é¢

```javascript
{
  "name": "currency_exchange",
  "arguments": {
    "amount": 1000,
    "fromCurrency": "CNY",
    "toCurrency": "HKD"
  }
}
```

### currency_exchange_llm

ä½¿ç”¨ LLM å¤„ç†è‡ªç„¶è¯­è¨€è´§å¸å…‘æ¢è¯·æ±‚

```javascript
{
  "name": "currency_exchange_llm",
  "arguments": {
    "userInput": "æˆ‘æƒ³å…‘æ¢ä¸€åƒäººæ°‘å¸ä¸ºæ¸¯å…ƒ"
  }
}
```

## æ–‡ä»¶ç»“æ„

```
â”œâ”€â”€ src/                          # æœåŠ¡å™¨ç«¯ä»£ç 
â”‚   â”œâ”€â”€ mcpServer.js              # MCP æœåŠ¡å™¨æ ¸å¿ƒ
â”‚   â”œâ”€â”€ server-sse.js             # SSE æœåŠ¡å™¨
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ config.js             # æœåŠ¡å™¨é…ç½®
â”‚   â”œâ”€â”€ tools/                    # MCP å·¥å…·
â”‚   â”‚   â”œâ”€â”€ currencyExchange.js   # è´§å¸å…‘æ¢å·¥å…·
â”‚   â”‚   â”œâ”€â”€ currencyExchangeLLM.js # LLM å¤„ç†å·¥å…·
â”‚   â”‚   â”œâ”€â”€ calculator.js         # è®¡ç®—å™¨å·¥å…·
â”‚   â”‚   â”œâ”€â”€ joker.js              # ç¬‘è¯å·¥å…·
â”‚   â”‚   â”œâ”€â”€ llm.js                # LLM å·¥å…·
â”‚   â”‚   â””â”€â”€ studentGrades.js      # å­¦ç”Ÿæˆç»©å·¥å…·
â”‚   â”œâ”€â”€ transports/
â”‚   â”‚   â””â”€â”€ sseTransport.js       # SSE ä¼ è¾“å±‚
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ csvReader.js          # CSV è¯»å–å·¥å…·
â”‚       â””â”€â”€ sessionStore.js       # ä¼šè¯å­˜å‚¨
â”œâ”€â”€ client/                       # å®¢æˆ·ç«¯ä»£ç 
â”‚   â”œâ”€â”€ html/
â”‚   â”‚   â””â”€â”€ currency-exchange-client.html # Web å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ js/
â”‚   â”‚   â””â”€â”€ CurrencyExchangeClient.js     # å®¢æˆ·ç«¯æ ¸å¿ƒç±»
â”‚   â””â”€â”€ css/                      # CSS æ ·å¼æ–‡ä»¶ï¼ˆé¢„ç•™ï¼‰
â”œâ”€â”€ tests/                        # æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ ç”¨æˆ·è¾“å…¥.csv                   # LLM è¾“å…¥æ–‡ä»¶
â”œâ”€â”€ ç»“æœè¾“å‡º.csv                   # LLM è¾“å‡ºæ–‡ä»¶
â””â”€â”€ start-server.sh               # å¯åŠ¨è„šæœ¬
```

## ä½¿ç”¨ç¤ºä¾‹

### Web å®¢æˆ·ç«¯ä½¿ç”¨

1. è®¿é—® http://localhost:3000/client/html/currency-exchange-client.html
2. è¾“å…¥é‡‘é¢ã€æºè´§å¸å’Œç›®æ ‡è´§å¸
3. ç‚¹å‡»"å…‘æ¢è´§å¸"æŒ‰é’®æŸ¥çœ‹ç»“æœ

### LLM æ‰¹é‡å¤„ç†

1. åœ¨ `ç”¨æˆ·è¾“å…¥.csv` æ–‡ä»¶ä¸­æ·»åŠ è‡ªç„¶è¯­è¨€å…‘æ¢è¯·æ±‚
2. ä½¿ç”¨ `currency_exchange_llm` å·¥å…·å¤„ç†
3. ç»“æœå°†ä¿å­˜åˆ° `ç»“æœè¾“å‡º.csv` æ–‡ä»¶

## å®¢æˆ·ç«¯å¼€å‘è¯´æ˜

### å®¢æˆ·ç«¯ä»£ç ç»“æ„

```
client/
â”œâ”€â”€ html/                    # HTMLé¡µé¢
â”‚   â””â”€â”€ currency-exchange-client.html
â”œâ”€â”€ js/                      # JavaScriptæ¨¡å—
â”‚   â””â”€â”€ CurrencyExchangeClient.js
â””â”€â”€ css/                     # CSSæ ·å¼æ–‡ä»¶ï¼ˆé¢„ç•™ï¼‰
```

### å®¢æˆ·ç«¯æ–‡ä»¶è¯´æ˜

#### HTML é¡µé¢

- `currency-exchange-client.html`: è´§å¸å…‘æ¢ MCP å®¢æˆ·ç«¯çš„ä¸»é¡µé¢ï¼Œæä¾›ç”¨æˆ·ç•Œé¢å’Œäº¤äº’åŠŸèƒ½

#### JavaScript æ¨¡å—

- `CurrencyExchangeClient.js`: MCP å®¢æˆ·ç«¯æ ¸å¿ƒç±»ï¼Œè´Ÿè´£ä¸æœåŠ¡å™¨çš„ SSE è¿æ¥å’Œ MCP æ¶ˆæ¯å¤„ç†

### å®¢æˆ·ç«¯å¼€å‘ç‰¹æ€§

- æ‰€æœ‰å®¢æˆ·ç«¯ä»£ç éƒ½ä½¿ç”¨ ES6 æ¨¡å—è¯­æ³•
- HTML é¡µé¢é€šè¿‡`<script type="module">`åŠ è½½ JavaScript æ¨¡å—
- å®¢æˆ·ç«¯ä½¿ç”¨æµè§ˆå™¨åŸç”Ÿçš„ EventSource è¿›è¡Œ SSE è¿æ¥
- æ”¯æŒç°ä»£æµè§ˆå™¨çš„ ES6+ç‰¹æ€§

## æŠ€æœ¯æ ˆ

- **Node.js**: æœåŠ¡å™¨è¿è¡Œç¯å¢ƒ
- **Express.js**: Web æœåŠ¡å™¨æ¡†æ¶
- **Server-Sent Events (SSE)**: å®æ—¶é€šä¿¡
- **MCP Protocol**: æ¨¡å‹ä¸Šä¸‹æ–‡åè®®
- **CSV å¤„ç†**: æ‰¹é‡æ•°æ®å¤„ç†

## è®¸å¯è¯

MIT License
